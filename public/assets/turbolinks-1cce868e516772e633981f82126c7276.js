(function(){var t,e,n,o,r,i,u,a,l,c,s,h,d,f,p,m,v,g,y,E,w,b,k,T,H,A,_,S,N,x,L,O,C,R,D,M,F,X,I,P,q,j,G,U,B,K,$,Q,V,Y,z,J,W,Z=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},te={}.hasOwnProperty,ee=function(t,e){function n(){this.constructor=t}for(var o in e)te.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},ne=[].slice;O={},d=10,Q=!1,g=null,x=null,X=null,v=null,J=null,o={BEFORE_CHANGE:"page:before-change",FETCH:"page:fetch",RECEIVE:"page:receive",CHANGE:"page:change",UPDATE:"page:update",LOAD:"page:load",RESTORE:"page:restore",BEFORE_UNLOAD:"page:before-unload",EXPIRE:"page:expire"},b=function(t){var e;return t=new n(t),G(),h(),Q&&(e=V(t.absolute))?(k(e),T(t)):T(t,K)},V=function(t){var e;return e=O[t],e&&!e.transitionCacheDisabled?e:void 0},y=function(t){return null==t&&(t=!0),Q=t},T=function(t,e){return null==e&&(e=function(){return function(){}}(this)),Y(o.FETCH,{url:t.absolute}),null!=J&&J.abort(),J=new XMLHttpRequest,J.open("GET",t.withoutHashForIE10compatibility(),!0),J.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),J.setRequestHeader("X-XHR-Referer",X),J.onload=function(){var n;return Y(o.RECEIVE,{url:t.absolute}),(n=M())?(I(t),f.apply(null,w(n)),L(),P(),e(),Y(o.LOAD)):document.location.href=t.absolute},J.onloadend=function(){return J=null},J.onerror=function(){return document.location.href=t.absolute},J.send()},k=function(t){return null!=J&&J.abort(),f(t.title,t.body),F(t),Y(o.RESTORE)},h=function(){var t;return t=new n(g.url),O[t.absolute]={url:t.relative,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:null!=document.querySelector("[data-no-transition-cache]")},m(d)},R=function(t){return null==t&&(t=d),/^[\d]+$/.test(t)?d=parseInt(t):void 0},m=function(t){var e,n,r,i,u,a;for(r=Object.keys(O),e=r.map(function(t){return O[t].cachedAt}).sort(function(t,e){return e-t}),a=[],i=0,u=r.length;u>i;i++)n=r[i],O[n].cachedAt<=e[t]&&(Y(o.EXPIRE,O[n]),a.push(delete O[n]));return a},f=function(e,n,r,i){return Y(o.BEFORE_UNLOAD),document.title=e,document.documentElement.replaceChild(n,document.body),null!=r&&t.update(r),$(),i&&E(),g=window.history.state,Y(o.CHANGE),Y(o.UPDATE)},E=function(){var t,e,n,o,r,i,u,a,l,c,s,h;for(i=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),u=0,l=i.length;l>u;u++)if(r=i[u],""===(s=r.type)||"text/javascript"===s){for(e=document.createElement("script"),h=r.attributes,a=0,c=h.length;c>a;a++)t=h[a],e.setAttribute(t.name,t.value);r.hasAttribute("async")||(e.async=!1),e.appendChild(document.createTextNode(r.innerHTML)),o=r.parentNode,n=r.nextSibling,o.removeChild(r),o.insertBefore(e,n)}},U=function(t){return t.innerHTML=t.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),t},$=function(){var t,e;return t=(e=document.querySelectorAll("input[autofocus], textarea[autofocus]"))[e.length-1],t&&document.activeElement!==t?t.focus():void 0},I=function(t){return(t=new n(t)).absolute!==X?window.history.pushState({turbolinks:!0,url:t.absolute},"",t.absolute):void 0},P=function(){var t,e;return(t=J.getResponseHeader("X-XHR-Redirected-To"))?(t=new n(t),e=t.hasNoHash()?document.location.hash:"",window.history.replaceState(g,"",t.href+e)):void 0},G=function(){return X=document.location.href},j=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},q=function(){return g=window.history.state},L=function(){var t;return navigator.userAgent.match(/Firefox/)&&!(t=new n).hasNoHash()?(window.history.replaceState(g,"",t.withoutHash()),document.location.hash=t.hash):void 0},F=function(t){return window.scrollTo(t.positionX,t.positionY)},K=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},p=function(t){var e,n,o;if(null==t||"object"!=typeof t)return t;e=new t.constructor;for(n in t)o=t[n],e[n]=p(o);return e},D=function(t){var e,n;return e=(null!=(n=document.cookie.match(new RegExp(t+"=(\\w+)")))?n[1].toUpperCase():void 0)||"",document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",e},Y=function(t,e){var n;return"undefined"!=typeof Prototype&&Event.fire(document,t,e,!0),n=document.createEvent("Events"),e&&(n.data=e),n.initEvent(t,!0,!0),document.dispatchEvent(n)},C=function(t){return!Y(o.BEFORE_CHANGE,{url:t})},M=function(){var t,e,n,o,r,i;return e=function(){var t;return 400<=(t=J.status)&&600>t},i=function(){var t;return null!=(t=J.getResponseHeader("Content-Type"))&&t.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},o=function(t){var e,n,o,r,i;for(r=t.querySelector("head").childNodes,i=[],n=0,o=r.length;o>n;n++)e=r[n],null!=("function"==typeof e.getAttribute?e.getAttribute("data-turbolinks-track"):void 0)&&i.push(e.getAttribute("src")||e.getAttribute("href"));return i},t=function(t){var e;return x||(x=o(document)),e=o(t),e.length!==x.length||r(e,x).length!==x.length},r=function(t,e){var n,o,r,i,u;for(t.length>e.length&&(i=[e,t],t=i[0],e=i[1]),u=[],o=0,r=t.length;r>o;o++)n=t[o],Z.call(e,n)>=0&&u.push(n);return u},!e()&&i()&&(n=v(J.responseText),n&&!t(n))?n:void 0},w=function(e){var n;return n=e.querySelector("title"),[null!=n?n.textContent:void 0,U(e.querySelector("body")),t.get(e).token,"runScripts"]},t={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e&&"function"==typeof e.getAttribute?e.getAttribute("content"):void 0}},update:function(t){var e;return e=this.get(),null!=e.token&&null!=t&&e.token!==t?e.node.setAttribute("content",t):void 0}},i=function(){var t,e,n,o,r,i,u,a,l,c;o=function(t){return(new DOMParser).parseFromString(t,"text/html")},e=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.documentElement.innerHTML=t,e},r=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.open("replace"),e.write(t),e.close(),e},n=function(t){var e,n,o,r,i,u;return o=(null!=(i=t.match(/<head[^>]*>([\s\S.]*)<\/head>/i))?i[0]:void 0)||"<head></head>",e=(null!=(u=t.match(/<body[^>]*>([\s\S.]*)<\/body>/i))?u[0]:void 0)||"<body></body>",r=document.createElement("html"),r.innerHTML=o+e,n=document.createDocumentFragment(),n.appendChild(r),n},t=function(t){var e,o,i;return e=function(t,e){return{passes:e(),fallback:t}},i=e(r,function(){return function(){var e,n;return 1===(null!=(e=t("<html><body><p>test"))&&null!=(n=e.body)?n.childNodes.length:void 0)}}(this)),o=e(n,function(){return function(){var e,n;return 2===(null!=(e=t("<html><body><form></form><div></div></body></html>"))&&null!=(n=e.body)?n.childNodes.length:void 0)}}(this)),[i,o]};try{if(window.DOMParser)return u=t(o),o}catch(s){return a=s,u=t(e),e}finally{for(l=0,c=u.length;c>l;l++)if(i=u[l],!i.passes)return i.fallback}},n=function(){function t(e){return this.original=null!=e?e:document.location.href,this.original.constructor===t?this.original:void this._parse()}return t.prototype.withoutHash=function(){return this.href.replace(this.hash,"").replace("#","")},t.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},t.prototype.hasNoHash=function(){return 0===this.hash.length},t.prototype._parse=function(){var t;return(null!=this.link?this.link:this.link=document.createElement("a")).href=this.original,t=this.link,this.href=t.href,this.protocol=t.protocol,this.host=t.host,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.search=t.search,this.hash=t.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},t}(),r=function(t){function e(t){return this.link=t,this.link.constructor===e?this.link:(this.original=this.link.href,this.originalElement=this.link,this.link=this.link.cloneNode(!1),void e.__super__.constructor.apply(this,arguments))}return ee(e,t),e.HTML_EXTENSIONS=["html"],e.allowExtensions=function(){var t,n,o,r;for(n=1<=arguments.length?ne.call(arguments,0):[],o=0,r=n.length;r>o;o++)t=n[o],e.HTML_EXTENSIONS.push(t);return e.HTML_EXTENSIONS},e.prototype.shouldIgnore=function(){return this._crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},e.prototype._crossOrigin=function(){return this.origin!==(new n).origin},e.prototype._anchored=function(){return(this.hash.length>0||"#"===this.href.charAt(this.href.length-1))&&this.withoutHash()===(new n).withoutHash()},e.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+e.HTML_EXTENSIONS.join("|")+")?$","g"))},e.prototype._optOut=function(){var t,e;for(e=this.originalElement;!t&&e!==document;)t=null!=e.getAttribute("data-no-turbolink"),e=e.parentNode;return t},e.prototype._target=function(){return 0!==this.link.target.length},e}(n),e=function(){function t(t){this.event=t,this.event.defaultPrevented||(this._extractLink(),this._validForTurbolinks()&&(C(this.link.absolute)||z(this.link.href),this.event.preventDefault()))}return t.installHandlerLast=function(e){return e.defaultPrevented?void 0:(document.removeEventListener("click",t.handle,!1),document.addEventListener("click",t.handle,!1))},t.handle=function(e){return new t(e)},t.prototype._extractLink=function(){var t;for(t=this.event.target;t.parentNode&&"A"!==t.nodeName;)t=t.parentNode;return"A"===t.nodeName&&0!==t.href.length?this.link=new r(t):void 0},t.prototype._validForTurbolinks=function(){return null!=this.link&&!(this.link.shouldIgnore()||this._nonStandardClick())},t.prototype._nonStandardClick=function(){return this.event.which>1||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},t}(),s=function(t){return setTimeout(t,500)},_=function(){return document.addEventListener("DOMContentLoaded",function(){return Y(o.CHANGE),Y(o.UPDATE)},!0)},N=function(){return"undefined"!=typeof jQuery?jQuery(document).on("ajaxSuccess",function(t,e){return jQuery.trim(e.responseText)?Y(o.UPDATE):void 0}):void 0},S=function(t){var e,o;return(null!=(o=t.state)?o.turbolinks:void 0)?(e=O[new n(t.state.url).absolute])?(h(),k(e)):z(t.target.location.href):void 0},A=function(){return j(),q(),v=i(),document.addEventListener("click",e.installHandlerLast,!0),window.addEventListener("hashchange",function(){return j(),q()},!1),s(function(){return window.addEventListener("popstate",S,!1)})},H=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/),l=window.history&&window.history.pushState&&window.history.replaceState&&H,u=!navigator.userAgent.match(/CriOS\//),B="GET"===(W=D("request_method"))||""===W,c=l&&u&&B,a=document.addEventListener&&document.createEvent,a&&(_(),N()),c?(z=b,A()):z=function(t){return document.location.href=t},this.Turbolinks={visit:z,pagesCached:R,enableTransitionCache:y,allowLinkExtensions:r.allowExtensions,supported:c,EVENTS:p(o)}}).call(this);